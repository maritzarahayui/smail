<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Template</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h2>Update Template</h2>
    <form th:action="@{'/template/update/' + ${template.id}}" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="kategori">Kategori:</label>
            <input type="text" class="form-control" id="kategori" name="kategori" th:value="${template.kategori}" required>
        </div>
        <div class="form-group">
            <label for="namaTemplate">Nama Template:</label>
            <input type="text" class="form-control" id="namaTemplate" name="namaTemplate" th:value="${template.namaTemplate}" required>
        </div>
        <div class="form-group">
            <label>List Pengguna:</label><br>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="pengguna1" name="listPengguna" value="Mahasiswa" th:checked="${template.listPengguna.contains('Mahasiswa')}">
                <label class="form-check-label" for="pengguna1">Mahasiswa</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="pengguna2" name="listPengguna" value="Dosen" th:checked="${template.listPengguna.contains('Dosen')}">
                <label class="form-check-label" for="pengguna2">Dosen</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="pengguna3" name="listPengguna" value="Staff" th:checked="${template.listPengguna.contains('Staff')}">
                <label class="form-check-label" for="pengguna3">Staff</label>
            </div>
        </div>
        <div class="form-group" id="listFieldContainer">
            <label for="listField">List Field:</label><br>
            <!-- Loop through each element in the listField -->
            <th:block th:each="field : ${template.listField}">
                <input type="text" class="form-control" th:value="${field}" name="listField" required>
                <br>
            </th:block>
        </div>

        <div class="form-group">
            <label for="file">Upload File:</label>
            <div class="input-group">
                <div class="custom-file">
                    <input type="file" class="custom-file-input" id="file" name="file">
                    <label class="custom-file-label" for="file" th:text="${template.fileName} ? ${template.fileName} : 'Choose file'">Choose file</label>
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-primary" onclick="addRow()">Add Row</button>
        <button type="submit" class="btn btn-primary">Update Template</button>
    </form>
</div>

<script>
    let rowCounter = 1;

    function addRow() {
        rowCounter++;
        let newInput = document.createElement('input');
        newInput.type = 'text';
        newInput.className = 'form-control listField';
        newInput.id = 'listField' + rowCounter;
        newInput.name = 'listField'; // Ensure the name is the same for all inputs
        newInput.required = true;

        let container = document.getElementById('listFieldContainer');
        container.appendChild(document.createElement('br'));
        container.appendChild(newInput);
    }
</script>

</body>
</html>
